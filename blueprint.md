# Blueprint: مشروع مركز رعاية الأطفال

## نظرة عامة

هذا المستند هو المصدر المرجعي لتصميم وتطوير تطبيق الويب الخاص بدراسة جدوى مشروع مركز رعاية الأطفال. يهدف التطبيق إلى عرض جميع جوانب المشروع بطريقة تفاعلية وجذابة بصريًا.

---

## سجل التغييرات والتطورات

### الإصدار الأولي

*   **الهيكل الأساسي:** تم بناء التطبيق باستخدام React + Vite.
*   **المكونات الأساسية:** تم إنشاء مجموعة من المكونات لعرض أقسام مختلفة من دراسة الجدوى.

### التعديلات والتحسينات الأخيرة

1.  **إضافة تذييل (`Footer.jsx`):** تم إنشاء مكون احترافي.

2.  **إعادة تصميم "الدراسة الفنية" (`TechnicalStudy.jsx`):** واجهة بطاقات تفاعلية مع نافذة عرض تفصيلية.

3.  **إعادة تصميم "الدراسات القانونية" (`LegalStudy.jsx`):** جدول زمني عمودي تفاعلي.

4.  **إعادة تصميم "الدراسة المالية" (`FinancialStudy.jsx`):** مخططات تفاعلية باستخدام `recharts`.

5.  **إعادة تصميم "دراسة السوق" (`MarketStudy.jsx`):** تصميم محدث مع نافذة منبثقة تفاعلية.

6.  **إعادة تصميم "التسعير المرجعي" (`Pricing.jsx`):
    *   **الوصف:** تم تعديل قسم التسعير المرجعي لتحسين تجربة المستخدم وجعله أكثر تفاعلية.
    *   **الحل:**
        *   تم تغيير ظهور التفاصيل من تأثير الـ `hover` إلى النقر على زر "عرض التفاصيل" / "إخفاء التفاصيل" داخل كل بطاقة تسعير.
        *   تظهر التفاصيل الآن مباشرة داخل الكارت نفسه عند النقر، مما يضمن عدم تداخل الرسوم البيانية أو المحتوى مع العناصر الأخرى في الصفحة.
        *   تم استخدام خاصية `layout` من `framer-motion` في المكون `PricingCard` لتمكين الرسوم المتحركة السلسة عند تغيير حجم البطاقة (توسيعها أو تصغيرها) عند عرض أو إخفاء التفاصيل.
        *   تم ضبط أنماط CSS لـ `pricing-card` و `card-details-content` لضمان أن التفاصيل تظهر كجزء من تدفق المستند الطبيعي داخل الكارت، وتمت معالجة تداخل الرسوم البيانية بزيادة ارتفاع الحاوية الخاصة بها.

7.  **تطوير "الهيكل التنظيمي" (`OrgChart.jsx`):
    *   **المشكلة:** كان عرض الهيكل التنظيمي غير مطابق للرؤية المطلوبة، وكانت هناك مشكلة مستمرة في ظهور التلميح (tooltip) خلف عناصر أخرى بسبب قيود "سياق التكديس" (Stacking Context).
    *   **الحل (التكرار الثالث - نهائي):** تم إعادة بناء آلية التلميح بالكامل لحل المشكلة بشكل جذري.
        *   **إزالة CSS Hover:** تم حذف جميع أنماط CSS المتعلقة بالتلميح لتجنب مشاكل `z-index`.
        *   **التحكم بـ JavaScript:** تم تعديل مكون `OrgChart.jsx` ليستخدم حالة React (`useState`) لتتبع البطاقة التي يتم الحومان فوقها.
        *   **مكون تلميح مُطلق (`position: fixed`):** تم إنشاء مكون `<Tooltip />` جديد يتم عرضه بشكل مُطلق بالنسبة لإطار العرض. هذا يضمن ظهوره **فوق كل شيء آخر** في الصفحة، متجاوزًا أي قيود لسياق التكديس.
        *   **المحتوى الديناميكي:** يعرض التلميح الآن بوضوح **عدد الموظفين** و**طبيعة مهامهم** عند الحومان.
        *   **إصلاح مشكلة التلميح في `OrgChart.css`:** تم إزالة `overflow: hidden;` من `.department-roles` لضمان ظهور التلميح بشكل صحيح.

8.  **إنشاء "تحليل المخاطر" (`RiskAnalysis.jsx`):** مكون جديد بتصميم حديث.

9.  **إضافة عناوين متحركة (`AnimatedTitle.jsx`):
    *   **التحسين:** تم إنشاء مكون `AnimatedTitle` يستخدم `framer-motion` لإضافة تأثير ظهور تدريجي جذاب لعناوين الأقسام.

10. **توحيد واستعادة "الهيكل البشري":**
    *   **الخطوة 1 (التوحيد):** بناءً على طلب، تم نسخ محتوى قسم "الهيكل الإداري والتنظيمي" إلى قسم "الهيكل البشري" لتوحيد المحتوى.
    *   **الخطوة 2 (الحذف المبدئي):** تم اقتراح وإجراء حذف لقسم "الهيكل البشري" لتجنب التكرار.
    *   **الخطوة 3 (التراجع والاستعادة):** بناءً على طلب لاحق، تم **التراجع عن الحذف**. تم استعادة ملفات `HumanStructure.jsx` و `HumanStructure.css` وإعادة تفعيل القسم في القائمة الرئيسية للتطبيق (`App.jsx`). القسمان الآن موجودان وكلاهما يعرض نفس المحتوى.

11. **إضافة قسم الغلاف (`Cover.jsx`):
    *   **الوصف:** تم إنشاء مكون `Cover.jsx` لعرض صورة الغلاف الرئيسية للصفحة. يتضمن المكون الصورة المرفقة كخلفية، مع تراكب (overlay) لوني، وعنوان رئيسي "دراسة جدوى لحضانة ورياض أطفال بالرياض"، وعنوان فرعي "مركز الطفولة المبكرة: رعاية وتعليم مبتكر لصناع المستقبل" بتصميم جذاب وعصري.
    *   **التطبيق:** تم استيراد المكون `Cover` في `App.jsx` واستخدامه في قسم "الغلاف" (`id: 'cover'`).
    *   **تعديلات لحل مشكلة الصورة والنص:** تم تعديل `src/components/Cover.css` لحل مشكلة عدم ظهور الصورة بشكل صحيح وظهور النص عموديًا أو مقطوعًا. تم تغيير طريقة عرض الصورة من وسم `<img>` إلى خاصية `background-image` في CSS، وتم ضبط `direction: rtl;` و `text-align: center;` للنص.

12. **تعديل أول قسمين (`IntroSectionContent.jsx`, `SummarySectionContent.jsx`):
    *   **الوصف:** تم إعادة هيكلة أول قسمين (بعد الغلاف) وهما "الحديث عن المشروع وأهميته وفق رؤية 2030" و "الملخص التنفيذي" ليصبحا أكثر تناسقًا وتنظيمًا مع بقية أقسام الموقع.
    *   **التطبيق:** تم نقل محتوى كل قسم إلى مكون React منفصل، وتم إنشاء ملفات CSS مخصصة لكل مكون لتطبيق تصميمات عصرية، مع استخدام `framer-motion` لتأثيرات حركية جذابة.

13. **تحديث وإصلاح مشكلة الرسوم البيانية في "الدراسات الفنية والتشغيلية" (`TechnicalStudy.jsx` و `TechnicalStudy.css`):
    *   **الوصف:** معالجة مشكلة اختفاء الموقع بالكامل عند النقر على أزرار الرسوم البيانية "الفئات العمرية" و "السعة الاستيعابية"، وتحديث بيانات المؤشرات التشغيلية وإضافة كارت "الخدمات".
    *   **الحل:**
        *   **السبب الجذري:** تم تحديد أن المشكلة الرئيسية كانت في التهيئة غير الصحيحة لمكون `BarChart` في `ChartModal` (خاصة محاور `XAxis` و `YAxis` لـ "الطاقة الاستيعابية"). هذا الخطأ كان يسبب تعطلًا في مكتبة `recharts` يؤدي إلى انهيار التطبيق.
        *   **التصحيحات في `TechnicalStudy.jsx`:**
            *   تم تحديث محتوى `operationalData` ليشمل البيانات الجديدة لـ "الفئات"، "السعة التصميمية"، "نسب الإشغال المتوقعة"، وإضافة كارت "الخدمات".
            *   تم تصحيح تعريف `XAxis` (ليصبح `type="number" dataKey="value"`) و `YAxis` (ليصبح `type="category" dataKey="name"`) لمخطط `BarChart` في `renderChart`، وتم التأكيد على `layout="vertical"`.
            *   تم التأكيد على إضافة `key={activeChart.id}` و `mode="wait"` لـ `AnimatePresence` و `ChartModal` لضمان الانتقالات السلسة وتتبع المكونات بشكل صحيح.
            *   تم توسيع دالة `renderChart` لدعم عرض قائمة الخدمات الجديدة (chartType: 'services-list').
        *   **التصحيحات في `TechnicalStudy.css`:**
            *   تم رفع `z-index` لمكونات النوافذ المنبثقة إلى `9999` و `10000` على التوالي.
            *   تم تحديد ارتفاع صريح (`height: 350px;`) لـ `.chart-container`.
            *   تمت إضافة أنماط CSS جديدة لـ `services-list-container` وعناصرها الفرعية لعرض قائمة الخدمات بشكل جذاب.

---

## الخطة الحالية والمستقبلية

*   **المهمة الحالية:** المشروع في حالة مستقرة بعد حل جميع المشاكل المعروفة.
*   **الخطوات التالية:** مراجعة شاملة للتطبيق، التأكد من تناسق التصميم والاستجابة الكاملة للشاشات المختلفة، ثم إعلان اكتمال المشروع.
